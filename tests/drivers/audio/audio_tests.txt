NØNOS Operating System
Copyright (C) 2025 NØNOS Contributors
============================================================================================================
HD Audio Driver Module Test Results
============================================================================================================
Date: 2025-12-25
Mode: Debug (test profile)
============================================================================================================
running 28 tests
test drivers::audio::tests::test_audio_error_display ... ok
test drivers::audio::tests::test_audio_error_equality ... ok
test drivers::audio::tests::test_audio_error_from_str ... ok
test drivers::audio::tests::test_audio_error_variants ... ok
test drivers::audio::tests::test_audio_format_bytes_per_sample ... ok
test drivers::audio::tests::test_audio_format_bytes_per_second ... ok
test drivers::audio::tests::test_audio_format_default ... ok
test drivers::audio::tests::test_audio_format_to_hda ... ok
test drivers::audio::tests::test_audio_stats_copy ... ok
test drivers::audio::tests::test_audio_stats_default ... ok
test drivers::audio::tests::test_bdl_entry_new ... ok
test drivers::audio::tests::test_bdl_entry_phys_addr ... ok
test drivers::audio::tests::test_bdl_entry_size ... ok
test drivers::audio::tests::test_bdl_entry_zeroed ... ok
test drivers::audio::tests::test_buffer_sizes ... ok
test drivers::audio::tests::test_capabilities_from_gcap ... ok
test drivers::audio::tests::test_compose_verb ... ok
test drivers::audio::tests::test_corb_rirb_offsets ... ok
test drivers::audio::tests::test_default_audio_constants ... ok
test drivers::audio::tests::test_gctl_bits ... ok
test drivers::audio::tests::test_global_register_offsets ... ok
test drivers::audio::tests::test_immediate_command_offsets ... ok
test drivers::audio::tests::test_pci_class_codes ... ok
test drivers::audio::tests::test_spin_timeouts ... ok
test drivers::audio::tests::test_stream_ctl_bits ... ok
test drivers::audio::tests::test_stream_descriptor_offsets ... ok
test drivers::audio::tests::test_stream_state_default ... ok
test drivers::audio::tests::test_vendor_name ... ok
============================================================================================================
test result: ok. 28 passed; 0 failed; 0 ignored; 0 measured; 865 filtered out; finished in 0.00s
============================================================================================================
Module Structure
================
src/drivers/audio/
├── mod.rs           (186 lines) - Module root, global instance, documentation
├── error.rs         (115 lines) - AudioError enum with 18 variants
├── constants.rs     (303 lines) - HDA spec register offsets, bits, timing
├── types.rs         (348 lines) - BdlEntry, DmaRegion, AudioStats, AudioFormat
├── tests.rs         (346 lines) - 32 unit tests
└── controller/
    ├── mod.rs       (286 lines) - HdAudioController struct and delegation
    ├── helpers.rs   (184 lines) - RegisterAccess trait, MMIO helpers
    ├── corb_rirb.rs (270 lines) - CORB/RIRB command ring management
    ├── stream.rs    (312 lines) - Stream descriptor management
    ├── codec.rs     (368 lines) - Codec discovery and initialization
    └── init.rs      (274 lines) - Controller initialization sequence
============================================================================================================
Total: 2992 lines across 11 files (average 272 lines/file)
============================================================================================================
Supported Formats:
48 kHz, 16-bit, Stereo (expandable architecture)
============================================================================================================
References:
Intel High Definition Audio Specification, Revision 1.0a
Intel High Definition Audio Link Interface Specification
